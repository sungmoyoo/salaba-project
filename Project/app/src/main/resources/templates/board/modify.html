<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='UTF-8'>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ë¹„íŠ¸ìº í”„ ë°ë¸Œì˜µìŠ¤ 5ê¸°</title>

  <link href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

  <!-- include summernote css/js -->
  <link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.css"
        rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.js"></script>

</head>
<body>

<div data-th-replace="header :: header">ë¨¸ë¦¬ë§</div>

<!-- ê²Œì‹œê¸€ ì¡°íšŒ -->
<h1 data-th-text="${boardName}">ê²Œì‹œíŒ</h1>
<form action="update" data-th-action="@{update}" data-th-object="${board}"
      enctype='multipart/form-data'
      method='post'>
  <input data-th-value="*{categoryNo}" name='categoryNo' type='hidden'>

  <div>
    ë²ˆí˜¸: <input data-th-value="*{boardNo}" name='boardNo' readonly type='text' value="100">
  </div>
  <div>
    ì‘ì„±ì: <input data-th-value="${board.writer.nickname}" readonly type='text' value="í™ê¸¸ë™">
  </div>
  <div>
    ì‘ì„±ì¼:<input data-th-value="${#dates.format(board.createdDate,'yyyy-MM-dd')}" readonly
               type='text' value="2024-03-27">
  </div>

    <!-- ë§ë¨¸ë¦¬ -->
    <div data-th-if="*{categoryNo != 0}">
      ë¶„ë¥˜:
      <select name="headNo">
        <option value="1">ê³µì§€</option>
        <option value="2">ì´ë²¤íŠ¸</option>
        <option value="3">í™ë³´</option>
        <option value="4">ê¿€íŒ</option>
        <option value="5">ì¡ë‹´</option>
        <option value="6">ì§ˆë¬¸</option>
      </select>
    </div>
    <!--ê³µê°œë²”ìœ„ -->
    <div>
      ê³µê°œë²”ìœ„:
      <input data-th-value="0" type="radio" name="scopeNo" onchange="setScopeNo(this)">
      <label>ì „ì²´ê³µê°œ</label><br>
      <input data-th-value="1" type="radio" name="scopeNo" onchange="setScopeNo(this)">
      <label>íšŒì›ê³µê°œ</label><br>
      <input data-th-value="2" type="radio" name="scopeNo" onchange="setScopeNo(this)">
      <label>ë¹„ê³µê°œ</label><br>
    </div>
    <!--ìœ„ì¹˜ -->
    <div data-th-if="*{categoryNo == 0}">
      <select name="regionNo">
        ì§€ì—­:
        <optgroup label="[êµ­ë‚´ì—¬í–‰]">
        <option value="1">ì„œìš¸</option>
        <option value="2">ì œì£¼ë„</option>
        <option value="3">ì „ì£¼</option>
        </optgroup>
        <optgroup label="[í•´ì™¸ì—¬í–‰]">
        <option value="11">ì‚¿í¬ë¡œ</option>
        <option value="12">ì˜¤ì‚¬ì¹´</option>
        <option value="13">í›„ì¿ ì˜¤ì¹´</option>
        <option value="21">ë² ë¥¼ë¦°</option>
        <option value="22">í”„ë‘í¬í‘¸ë¥´íŠ¸</option>
        <option value="31">ë¸Œë¦¬ì¦ˆë²ˆ</option>
        <option value="32">ë©œë²„ë¥¸</option>
        <option value="33">ì‹œë“œë‹ˆ</option>
        <option value="41">íŒŒë¦¬</option>
        <option value="42">ëª½í ë¦¬ì—</option>
        </optgroup>
      </select>
    </div>
    <!-- ì œëª©, ë‚´ìš© -->
    <div>
      ì œëª©: <input data-th-value="*{title}" name='title' type='text' value="ì œëª©ì…ë‹ˆë‹¤.">
    </div>
    <div>
      ë‚´ìš©: <textarea id="summernote" data-th-text="*{content}" name='content' style="display: none;"/></textarea>
    </div>
    <!--ë³€ê²½ ë²„íŠ¼-->
    <div>
      <button>ë³€ê²½</button>
      <a data-th-href="@{delete(categoryNo=*{categoryNo}, boardNo=*{boardNo})}">[ì‚­ì œ]</a>
    </div>
  </div>
</form>

<!-- í˜ì´ì§€ ë§¨ ìœ„ë¡œ ì˜¬ë¼ê°€ê¸°-->
<button id="scrollToTopBtn" onclick="scrollToTop()">ğŸ”</button>

<div data-th-replace="footer :: footer">ê¼¬ë¦¬ë§</div>

<script>

<!-- summernote -->
 $(document).ready(function() {

    $('#summernote').summernote({
      height: 300,
      width: 500,
      callbacks: {
        onInit: function() {
          console.log('Summernote is launched');
        },
        onImageUpload: function(files) {
          let data = new FormData();
          for (const file of files) {
            data.append("files", file);
          }
          $.ajax({
            url: 'file/upload',
            type: 'POST',
            dataType: 'json',
            contentType: false,
            processData: false,
            data: data
          })
          .done(function(result) {
            if (result.length == 0) {
              alert('ë¡œê·¸ì¸ í•˜ì„¸ìš”!');
              return;
            }


            for (const boardFile of result) {
              $('#summernote').summernote('insertImage',
                'https://kr.object.ncloudstorage.com/tp3-salaba/board/'
                + boardFile.uuidFileName);
            }
          });
        }
      }
    });
  });

      // ë²„íŠ¼ í‘œì‹œ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê³  ìŠ¤í¬ë¡¤ ìœ„ì¹˜ì— ë”°ë¼ ë²„íŠ¼ì„ ë³´ì—¬ì£¼ê±°ë‚˜ ê°ì¶”ëŠ” í•¨ìˆ˜
    window.onscroll = function() {
        scrollFunction();
    };

    function scrollFunction() {
        var scrollToTopBtn = document.getElementById("scrollToTopBtn");
        if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            scrollToTopBtn.style.display = "block";
        } else {
            scrollToTopBtn.style.display = "none";
        }
    }

    // í˜ì´ì§€ ë§¨ ìœ„ë¡œ ìŠ¤í¬ë¡¤í•˜ëŠ” í•¨ìˆ˜
    function scrollToTop() {
        document.body.scrollTop = 0; // For Safari
        document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
    }


</script>

<style>
  body {
    padding-left: 10px;
  }
  #scrollToTopBtn {
    display: none;
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 99;
    border: none;
    outline: none;
    background-color: #35C5B3;
    color: white;
    cursor: pointer;
    padding: 15px;
    border-radius: 50%;
  }
</style>

</body>
</html>